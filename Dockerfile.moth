FROM alpine:3.9 AS builder
RUN apk --no-cache add go libc-dev git
COPY src /root/go/src/github.com/dirtbags/moth/src
WORKDIR /root/go/src/github.com/dirtbags/moth/src
RUN go get .
RUN go build -o /mothd *.go

FROM alpine
COPY --from=builder /mothd /mothd
COPY theme /theme
ENTRYPOINT [ "/mothd" ]
